{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\DimoF\\\\Desktop\\\\ProyectoReactNative\\\\src\\\\components\\\\myCamera.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Camera } from 'expo-camera';\nimport { bd, storage } from \"../firebase/config\";\n\nvar MyCamera = function (_Component) {\n  _inherits(MyCamera, _Component);\n\n  var _super = _createSuper(MyCamera);\n\n  function MyCamera(props) {\n    var _this;\n\n    _classCallCheck(this, MyCamera);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      permission: false,\n      photo: '',\n      showCamera: true\n    };\n    _this.camera;\n    return _this;\n  }\n\n  _createClass(MyCamera, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      Camera.requestCameraPermissionsAsync().then(function () {\n        _this2.setState({\n          permission: true\n        });\n      }).catch(function (error) {\n        return console.log(error);\n      });\n    }\n  }, {\n    key: \"takePicture\",\n    value: function takePicture() {\n      var _this3 = this;\n\n      this.camera.takePictureAsync().then(function (photo) {\n        _this3.setState({\n          photo: photo.uri,\n          showCamera: false\n        });\n      }).catch(function (error) {\n        return console.log(error);\n      });\n    }\n  }, {\n    key: \"savePhoto\",\n    value: function savePhoto() {\n      var _this4 = this;\n\n      fetch(this.state.photo).then(function (res) {\n        return res.blob();\n      }).then(function (image) {\n        var ref = storage.ref(\"photos/\" + Date.now() + \".jpg\");\n        ref.put(image).then(function () {\n          return ref.getDownloadURL().then(function (url) {\n            _this4.props.onImageUpload(url);\n\n            _this4.setState({\n              photo: ''\n            });\n          }).catch(function (error) {\n            return console.log(error);\n          });\n        }).catch(function (error) {\n          return console.log(error);\n        });\n      }).catch(function (error) {\n        return console.log(error);\n      });\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      return React.createElement(View, {\n        style: styles.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }\n      }, this.state.permission ? this.state.showCamera === false ? React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }\n      }, React.createElement(Image, {\n        style: styles.cameraBody,\n        source: {\n          uri: this.state.photo\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 25\n        }\n      }), React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 25\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this5.savePhoto();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 33\n        }\n      }, \"Aceptar\")), React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this5.clear();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 33\n        }\n      }, \"Rechazar\")))) : React.createElement(View, {\n        style: styles.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 17\n        }\n      }, React.createElement(Camera, {\n        style: styles.cameraBody,\n        type: Camera.Constants.Type.back,\n        ref: function ref(reference) {\n          return _this5.camera = reference;\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }\n      }), React.createElement(TouchableOpacity, {\n        style: styles.button,\n        onPress: function onPress() {\n          return _this5.takePicture();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 25\n        }\n      }, \"Sacar Foto\"))) : React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 17\n        }\n      }, \"No tienes permiso para usar la camara\"));\n    }\n  }]);\n\n  return MyCamera;\n}(Component);\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  cameraBody: {\n    flex: 7\n  },\n  button: {\n    flex: 1,\n    justifyContent: 'centre'\n  }\n});\nexport default MyCamera;","map":{"version":3,"sources":["C:/Users/DimoF/Desktop/ProyectoReactNative/src/components/myCamera.js"],"names":["React","Component","Camera","bd","storage","MyCamera","props","state","permission","photo","showCamera","camera","requestCameraPermissionsAsync","then","setState","catch","error","console","log","takePictureAsync","uri","fetch","res","blob","image","ref","Date","now","put","getDownloadURL","url","onImageUpload","styles","container","cameraBody","savePhoto","clear","Constants","Type","back","reference","button","takePicture","StyleSheet","create","flex","justifyContent"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {View, Text, TouchableOpacity, StyleSheet, Image} from 'react-native';\r\nimport {Camera} from 'expo-camera';\r\nimport {bd, storage} from '../firebase/config';\r\n\r\nclass MyCamera extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {  \r\n            permission: false, \r\n            photo: '', \r\n            showCamera: true,\r\n        };\r\n        this.camera \r\n    }\r\n\r\n    componentDidMount(){\r\n        Camera.requestCameraPermissionsAsync()\r\n            .then( () =>{\r\n                this.setState({\r\n                    permission: true\r\n                })\r\n            })\r\n        .catch( error => console.log(error))\r\n    }\r\n\r\n    takePicture(){\r\n        this.camera.takePictureAsync()\r\n            .then( (photo) =>{\r\n                this.setState({\r\n                    photo: photo.uri,\r\n                    showCamera: false,\r\n                })\r\n            })\r\n            .catch(error => console.log(error))\r\n    }\r\n\r\n    savePhoto(){\r\n        fetch(this.state.photo)\r\n            .then( res => res.blob())\r\n            .then( image =>{\r\n                const ref = storage.ref(`photos/${Date.now()}.jpg`)\r\n                ref.put(image)\r\n                    .then(()=>(\r\n                        ref.getDownloadURL()\r\n                            .then( url => {\r\n                                this.props.onImageUpload(url);\r\n                                this.setState({\r\n                                    photo:'',\r\n                                })\r\n                            })\r\n                            .catch(error => console.log(error))\r\n                    ))\r\n                    .catch(error => console.log(error))\r\n            })\r\n            .catch(error => console.log(error))\r\n    }\r\n\r\n    clear(){\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <View style={styles.container}>\r\n            {\r\n                this.state.permission ?\r\n\r\n                    this.state.showCamera === false ?\r\n                    <React.Fragment>\r\n                        <Image \r\n                            style={styles.cameraBody}\r\n                            source={{uri:this.state.photo}}\r\n                        /> \r\n                        <View>\r\n                            <TouchableOpacity onPress= {() => this.savePhoto()}>\r\n                                <Text>Aceptar</Text>\r\n                            </TouchableOpacity>\r\n                            <TouchableOpacity onPress= {() => this.clear()}>\r\n                                <Text>Rechazar</Text>\r\n                            </TouchableOpacity>\r\n                        </View>\r\n                    </React.Fragment>\r\n                    :\r\n\r\n                <View style={styles.container}>\r\n                    <Camera \r\n                        style={styles.cameraBody}\r\n                        type={Camera.Constants.Type.back}\r\n                        ref={ reference => this.camera = reference}\r\n                    />\r\n                    <TouchableOpacity style={styles.button} onPress= {() => this.takePicture()}>\r\n                        <Text>Sacar Foto</Text>\r\n                    </TouchableOpacity>\r\n                </View>\r\n                :\r\n                <Text>No tienes permiso para usar la camara</Text>\r\n            }\r\n            </View>\r\n            \r\n        );\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container:{\r\n        flex: 1,\r\n    \r\n    },\r\n    cameraBody:{\r\n        flex: 7,\r\n    \r\n    },\r\n    button:{\r\n        flex: 1,\r\n        justifyContent: 'centre',\r\n    }\r\n})\r\n\r\nexport default MyCamera;"]},"metadata":{},"sourceType":"module"}